<div class="card">
  <div class="header">
    <div>
      <h1 class="m0">Utilisateurs</h1>
      <p class="helper m0">Gère les comptes (recherche par nom/email).</p>
    </div>
    <form method="get" class="actions" action="/admin/users">
      <input type="text" name="q" value="{{q}}" placeholder="Rechercher…"/>
      <button class="btn" type="submit">Rechercher</button>
      <a class="btn btn-ghost" href="/admin/users">Réinitialiser</a>
    </form>
  </div>

  <div class="table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Email</th>
          <th>Rôle</th>
          <th style="width:220px">Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#if users.length}}
          {{#each users}}
            <tr>
              <td>{{this.id}}</td>
              <td>{{this.name}}</td>
              <td>{{this.email}}</td>
              <td>
                <span class="chip {{this.role}}">{{this.role}}</span>
              </td>
              <td>
                <div class="actions">
                  <a class="btn" href="/admin/users/{{this.id}}/edit">Éditer</a>
                  <form method="post" action="/admin/users/{{this.id}}/delete" onsubmit="return confirm('Supprimer cet utilisateur ?');">
                    <input type="hidden" name="_csrf" value="{{../csrfToken}}">
                    <button class="btn btn-danger" type="submit">Supprimer</button>
                  </form>
                </div>
              </td>
            </tr>
          {{/each}}
        {{else}}
          <tr>
            <td colspan="5">Aucun utilisateur trouvé.</td>
          </tr>
        {{/if}}
      </tbody>
    </table>
  </div>
</div>
